{% extends 'relation/booklist.html' %}
{% load static %}
{% block content %}

<!-- GLOBAL STYLES & ANIMATIONS -->
<style>
    /* Full page smooth fade */
    body {
        animation: fadeAll 0.8s ease-in-out;
    }
    @keyframes fadeAll {
        0% { opacity: 0; }
        100% { opacity: 1; }
    }

    /* Hero fade + parallax */
    .hero-section {
        width: 100%;
        height: 80vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #0d6efd33, #ffffff22);
        position: relative;
        overflow: hidden;
    }

    .hero-section::before {
        content: "";
        position: absolute;
        width: 100%;
        height: 120%;
        background: url('{{ book.image.url }}') center/cover no-repeat;
        filter: blur(10px) brightness(70%);
        animation: heroZoom 14s ease-in-out infinite alternate;
    }

    @keyframes heroZoom {
        0% { transform: scale(1); }
        100% { transform: scale(1.15); }
    }

    /* Book image */
    .book-image {
        width: 320px;
        height: 450px;
        object-fit: cover;
        border-radius: 20px;
        z-index: 2;
        transition: transform 0.6s ease;
        animation: popIn 0.8s ease forwards;
    }

    .book-image:hover {
        transform: scale(1.07);
    }

    @keyframes popIn {
        0% { opacity: 0; transform: translateY(40px); }
        100% { opacity: 1; transform: translateY(0); }
    }

    /* Glass card */
    .glass-card {
        backdrop-filter: blur(20px);
        background: rgba(255, 255, 255, 0.50);
        border-radius: 20px;
        border: 1px solid rgba(255,255,255,0.2);
        padding: 25px;
        margin-top: -60px;
        animation: slideUp 0.9s ease forwards;
    }

    @keyframes slideUp {
        0% { opacity: 0; transform: translateY(60px); }
        100% { opacity: 1; transform: translateY(0); }
    }

    /* Animated section cards */
    .info-card {
        border-radius: 18px;
        border: none;
        padding: 18px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        animation: fadeCard 0.8s ease forwards;
    }

    @keyframes fadeCard {
        0% { opacity: 0; transform: translateY(25px); }
        100% { opacity: 1; transform: translateY(0); }
    }

    .info-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    .section-title {
        font-size: 22px;
        font-weight: bold;
        margin-bottom: 10px;
    }

</style>

<!-- HERO SECTION -->
<div class="hero-section d-flex flex-column text-center">
    <img src="{{ book.image.url }}" 
         alt="{{ book.title }}" 
         class="book-image shadow-xl">

    <h1 class="text-white fw-bold mt-4" style="z-index: 2; font-size: 40px;">
        {{ book.title }}
    </h1>
</div>

<!-- INFO CONTENT -->
<div class="container">

    <!-- GLASS MAIN CARD -->
    <div class="glass-card shadow-lg">

        <!-- BOOK INFO -->
        <div class="info-card bg-light mb-4">
            <div class="section-title">üìò Book Information</div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>Title:</strong> {{ book.title }}</li>

                <li class="list-group-item">
                    <strong>Author(s):</strong>
                    {% for author in book.authors.all %}
                        {{ author.first_name }} {{ author.last_name }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        <span class="text-muted">N/A</span>
                    {% endfor %}
                </li>

                <li class="list-group-item"><strong>Publisher:</strong> {{ book.publisher }}</li>
                <li class="list-group-item">
                    <strong>Publication Date:</strong> {{ book.publication_date|date:"F d, Y" }}
                </li>
            </ul>
        </div>

        <!-- PUBLISHER INFO -->
        <div class="info-card bg-white mb-4 shadow-sm">
            <div class="section-title">üè¢ Publisher Details</div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item"><strong>Name:</strong> {{ book.publisher.name }}</li>
                <li class="list-group-item"><strong>Address:</strong> {{ book.publisher.address }}</li>
                <li class="list-group-item"><strong>Country:</strong> {{ book.publisher.country }}</li>
                <li class="list-group-item"><strong>City:</strong> {{ book.publisher.city }}</li>
            </ul>
        </div>

        <!-- AUTHOR INFO -->
        <div class="info-card bg-light shadow-sm">
            <div class="section-title">‚úçÔ∏è Author Details</div>
            <ul class="list-group list-group-flush">
                {% for author in book.authors.all %}
                    <li class="list-group-item">
                        <strong>Name:</strong> {{ author.first_name }} {{ author.last_name }} <br>
                        <strong>Email:</strong> {{ author.email }}
                    </li>
                {% empty %}
                    <li class="list-group-item text-muted">No authors available.</li>
                {% endfor %}
            </ul>
        </div>

    </div>

</div>

{% endblock content %}
